{"name":"dbs-example-designpatterns-iterator","tagline":"Java Iterator design pattern example","body":"<h2>Introduction</h2>\r\nThe intent of an iterator is to provide a way to traverse through a collection in a sequential way without exposing the underlying collection. The Java Iterator is a nice implementation of iterator design pattern, and allows us to traverse through a collection in a sequential way. The collection has a method to create an iterator instance, which we use to traverse.\r\n\r\nIn the Iterator design pattern, an iterator is an interface which provides a simple interaction mechanism. More importantly the user of the iterator interface does not need to know about the working mechanisms or complexity of the related collection. This encapsulates the the logic in one spot.\r\n\r\n<h2>Iterator can do more than traversal</h2>\r\n\r\nIterators are not limited to traversal alone. It is entirely left to the purpose and implementation. There can be functional logic involved in an iterator. For example, we can have a <code>FilteringIterator</code>, which can filter out certain required values for traversal. \r\n\r\n<h2>Iterator Design Pattern</h2>\r\n\r\nA factory method available in the collection will return the instance of the iterator.\r\n\r\n \r\n<h2>Polymorphic Iterator</h2>\r\n\r\nIf an iterator has common contract across multiple collections, the client code which interacts with the iterator need not be changed for different collections. This is called polymorphic iterator.\r\n\r\n<h2>External vs Internal Iterator</h2>\r\n\r\nWhen the client controls the iteration sequence and index position then it is called an <b>external iterator</b>. Otherwise if the iterator controls the traversal then it is called an <b>internal iterator</b>. For an external iterator, the client should explicitly invoke the method to move the pointer to next element. For internal iterator, when an element is accessed the pointer will be automatically moved to next index by the iterator. In general, internal iterators are easier to use than the external iterators.\r\n\r\n<h2>Robust Iterator</h2>\r\n\r\nThis is a bit more complex. Imagine an iterator instance is instantiated and transversed.  What would happen if the contents of the underlying collection is modified - for example, a new element is inserted or an existing element is deleted?  It's behavior will be unpredictable.  A simple implementation of an iterator will create a copy of the collection when it is instantiated, and use that for traversal. That way, during the iteration process, even if the original collection is modified the \"iterator copy\" would be unchanged and the behavior will be predictable.\r\n\r\nThe behavior of a <b>robust iterator</b> is consistent, even if the associated collection is modified. It works with the original collection without making a copy. This is usually implemented by using an event listener that notifies the iterator of changes to the collection.\r\n\r\n<h2>Null Iterator</h2>\r\n\r\nImagine we are traversing a tree data structure. During the tree traversal, when we ask for the nextElement, we will get a concrete iterator which will help us to traverse through the tree. If we ask for the nextElement in the leaf node, we will get a <b>null iterator</b> returned by the collection signifying the leaf node. This behavior will allow us to design the tree traversal pattern.\r\n\r\n<h2>Key Points for Iterator Design Pattern</h2>\r\n<ul>\r\n\t<li>Iterators can have complex traversal algorithms and provide a variety of transversal mechanisms.</li>\r\n\t<li>All at the same moment in time, many iterator instances may be working and pointing to different indexes.  This deals with the multi-thread properties of an iterator.</li>\r\n</ul>\r\n\r\n<h2>Java Code Example of Iterator Design Pattern</h2>\r\n\r\nSource Code.\r\n\r\n<h3>Book.java</h3>\r\n<pre>\r\npublic class Book {\r\n  private String bookName;\r\n  private String bookType;\r\n \r\n  public Book(String bookName, String bookType) {\r\n    this.bookName = bookName;\r\n    this.bookType = bookType;\r\n  }\r\n \r\n  public String getBookName() {\r\n    return bookName;\r\n  }\r\n \r\n  public void setBookName(String bookName) {\r\n    this.bookName = bookName;\r\n  }\r\n \r\n  public String getBookType() {\r\n    return bookType;\r\n  }\r\n \r\n  public void setBookType(String bookType) {\r\n    this.bookType = bookType;\r\n  }\r\n}\r\n</pre>\r\n\r\n\r\n<h3>ILibrary.java</h3>\r\n<pre>\r\nimport java.util.List;\r\n \r\npublic interface ILibrary {\r\n \r\n  public List<Book> getBooks();\r\n \r\n  public void addBook(Book book);\r\n \r\n  public void removeBook(Book book);\r\n \r\n  public LibraryIterator createIterator(String iteratorType);\r\n}\r\n</pre>\r\n\r\n\r\n<h3>LibraryImpl.java</h3>\r\n<pre>\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n \r\npublic class LibraryImpl implements ILibrary {\r\n \r\n  List<Book> bookList;\r\n \r\n  public LibraryImpl() {\r\n    bookList = new ArrayList<Book>();\r\n  }\r\n \r\n  @Override\r\n  public List<Book> getBooks() {\r\n \r\n    return bookList;\r\n  }\r\n \r\n  @Override\r\n  public void addBook(Book book) {\r\n    bookList.add(book);\r\n  }\r\n \r\n  @Override\r\n  public void removeBook(Book book) {\r\n    bookList.remove(book);\r\n  }\r\n \r\n  @Override\r\n  public LibraryIterator createIterator(String iteratorType) {\r\n    if (\"Fiction\".equals(iteratorType)) {\r\n      return new FictionIterator(bookList);\r\n    } else if (\"NonFiction\".equals(iteratorType)) {\r\n      return new NonFictionIterator(bookList);\r\n    } else {\r\n      throw new RuntimeException(\"Unknown iteratorType=\" + iteratorType);\r\n    }\r\n  }\r\n}\r\n</pre>\r\n\r\n\r\n<h3>LibraryIterator.java</h3>\r\n<pre>\r\npublic interface LibraryIterator {\r\n  public Book nextBook();\r\n \r\n  public boolean isLastBook();\r\n \r\n  public Book currentBook();\r\n}\r\n</pre>\r\n\r\n\r\n<h3>FictionIterator.java</h3>\r\n<pre>\r\nimport java.util.List;\r\n \r\npublic class FictionIterator implements LibraryIterator {\r\n \r\n  public List<Book> bookList;\r\n  private int position;\r\n \r\n  public FictionIterator(List<Book> bookList) {\r\n    this.bookList = bookList;\r\n  }\r\n \r\n  @Override\r\n  public Book nextBook() {\r\n    Book book = null;\r\n    for (; position &lt; bookList.size(); position++) {\r\n      if (\"Fiction\".equals((bookList.get(position)).getBookType())) {\r\n        book = bookList.get(position);\r\n        position++;\r\n        break;\r\n      }\r\n    }\r\n    return book;\r\n  }\r\n \r\n  @Override\r\n  public boolean isLastBook() {\r\n    for (int i = position; i &lt; bookList.size(); i++) {\r\n      if (\"Fiction\".equals((bookList.get(i)).getBookType())) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n \r\n  @Override\r\n  public Book currentBook() {\r\n    if (position &lt; bookList.size()) {\r\n      return bookList.get(position);\r\n    }\r\n    return null;\r\n  }\r\n \r\n}\r\n</pre>\r\n\r\n\r\n<h3>NonFictionIterator.java</h3>\r\n<pre>\r\nimport java.util.List;\r\n \r\npublic class NonFictionIterator implements LibraryIterator {\r\n \r\n  List<Book> bookList;\r\n  private int position;\r\n \r\n  public NonFictionIterator(List<Book> bookList) {\r\n    this.bookList = bookList;\r\n  }\r\n \r\n  @Override\r\n  public Book nextBook() {\r\n    Book book = null;\r\n    for (; position &lt; bookList.size(); position++) {\r\n      if (\"NonFiction\".equals((bookList.get(position)).getBookType())) {\r\n        book = bookList.get(position);\r\n        position++;\r\n        break;\r\n      }\r\n    }\r\n    return book;\r\n  }\r\n \r\n  @Override\r\n  public boolean isLastBook() {\r\n    for (int i = position; i &lt; bookList.size(); i++) {\r\n      if (\"NonFiction\".equals((bookList.get(i)).getBookType())) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n \r\n  @Override\r\n  public Book currentBook() {\r\n    if (position &lt; bookList.size()) {\r\n      return bookList.get(position);\r\n    }\r\n    return null;\r\n  }\r\n \r\n}\r\n</pre>\r\n\r\n\r\n<h3>IteratorSample.java</h3>\r\n<pre>\r\npublic class IteratorSample {\r\n  public static void main(String args[]) {\r\n    LibraryImpl library = new LibraryImpl();\r\n    library.addBook(new Book(\"Moby Dick\", \"Fiction\"));\r\n    library.addBook(new Book(\"A Tale of Two Cities\", \"Fiction\"));\r\n    library.addBook(new Book(\"A Brief History of Time\", \"NonFiction\"));\r\n    library.addBook(new Book(\"The Theory of Everything\", \"Fiction\"));\r\n    library.addBook(new Book(\"The Large Scale Structure of Space-Time\", \"NonFiction\"));\r\n \r\n    LibraryIterator fictionIterator = library.createIterator(\"Fiction\");\r\n    while (!fictionIterator.isLastBook()) {\r\n      System.out.println(\"Fiction Book: \"\r\n          + fictionIterator.nextBook().getBookName());\r\n    }\r\n \r\n    LibraryIterator nonfictionIterator = library.createIterator(\"NonFiction\");\r\n    while (!nonfictionIterator.isLastBook()) {\r\n      System.out.println(\"NonFiction Book: \"\r\n          + nonfictionIterator.nextBook().getBookName());\r\n    }\r\n  }\r\n}\r\n</pre>\r\n\r\n\r\n<h3>Output</h3>\r\n<pre>\r\nFiction Book: Moby Dick \r\nFiction Book: A Tale of Two Cities \r\nFiction Book: The Theory of Everything \r\nNonFiction Book: A Brief History of Time \r\nNonFiction Book: The Large Scale Structure of Space-Time\r\n</pre>\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}